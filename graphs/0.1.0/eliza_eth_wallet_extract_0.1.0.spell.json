{"id":"e86a2603-f747-4be4-86d5-b90564bcc695","name":"eliza_eth_wallet_extract_0.1.0","graph":{"id":"demo@0.1.0","nodes":{"232":{"id":232,"data":{"name":"Input","text":"Input text here","outputs":[],"socketKey":"9d61118c-3c5a-4379-9dae-41965e56207f","useDefault":false,"dataControls":{"name":{"expanded":true},"useDefault":{"expanded":true},"playtestToggle":{"expanded":true}},"defaultValue":"Input text here","playtestToggle":{"receivePlaytest":true}},"inputs":{},"outputs":{"output":{"connections":[]}},"position":[-1890.0042653507292,-454.5342380912433],"name":"Universal Input"},"233":{"id":233,"data":{"name":"Address","socketKey":"a9483a8d-8afc-4149-9e48-6a359ccb6fbf","dataControls":{"name":{"expanded":true},"sendToPlaytest":{"expanded":true}},"sendToPlaytest":true},"inputs":{"input":{"connections":[]},"trigger":{"connections":[]}},"outputs":{"trigger":{"connections":[]}},"position":[-869.8992781922076,-163.36855074655037],"name":"Output"},"2638":{"id":2638,"data":{"code":"\nfunction worker({\n  input,\n  agent_public_key\n}, data, state) {\n\n  let evalInput = input;\n\n  const hasAgentPublicKey = input.toLowerCase().includes(agent_public_key);\n\n  // if it includes the agent public key\n\n  if (hasAgentPublicKey) {\n    evalInput.replace(agent_public_key, 'your wallet');\n  }\n\n  function hasEthereumAddress(string) {\n    let regex = /^0x[a-fA-F0-9]{40}$/;\n    return regex.test(string);\n  }\n\n  const hasSpeakerPublicKey = hasEthereumAddress(evalInput);\n\n  // if there's no key, return output null\n  if (!hasSpeakerPublicKey) {\n    return { output: null }\n  }\n\n  // extract the speaker public key\n\n  function extractFirstEthereumAddress(string) {\n    let regex = /0x[a-fA-F0-9]{40}/g;\n    return string.match(regex)[0];\n  }\n\n  const speakerAddress = extractFirstEthereumAddress(evalInput);\n\n  return { output: speakerAddress }\n}\n","name":"Get 0x","inputs":[{"name":"input","taskType":"output","socketKey":"input","socketType":"anySocket","connectionType":"input"},{"name":"agent_public_key","taskType":"output","socketKey":"agent_public_key","socketType":"anySocket","connectionType":"input"}],"outputs":[{"name":"output","taskType":"output","socketKey":"output","socketType":"anySocket","connectionType":"output"}],"dataControls":{"code":{"expanded":true},"name":{"expanded":true},"inputs":{"expanded":true},"outputs":{"expanded":true}}},"inputs":{"input":{"connections":[]},"agent_public_key":{"connections":[]},"trigger":{"connections":[]}},"outputs":{"output":{"connections":[]},"trigger":{"connections":[]}},"position":[-1358.914270687644,-428.1169479067634],"name":"Code"},"5197":{"id":5197,"data":{"name":"Agent Public Key","text":"Input text here","socketKey":"0b632c7d-f278-450e-84ca-eb2a5ccceac1","dataControls":{"name":{"expanded":true},"useDefault":{"expanded":true},"playtestToggle":{"expanded":true}},"defaultValue":"Input text here","playtestToggle":{"receivePlaytest":true}},"inputs":{},"outputs":{"output":{"connections":[]}},"position":[-1897.2409466902855,-196.74432576818123],"name":"Universal Input"},"5742":{"id":5742,"data":{},"inputs":{"string":{"connections":[]},"trigger":{"connections":[]}},"outputs":{"true":{"connections":[]},"false":{"connections":[]}},"position":[-492.8575549997722,-307.27737711956996],"name":"Is Null Or Undefined"}},"comments":[]},"createdAt":"2022-12-14T10:18:11.553Z","updatedAt":"2022-12-21T12:55:18.178Z","deletedAt":null,"modules":[],"gameState":{}}