{"id":"e86a2603-f747-4be4-86d5-b90564bcc695","name":"eliza_eth_wallet_extract_0.1.0","graph":{"id":"demo@0.1.0","nodes":{"124":{"id":124,"data":{"name":"default","socketKey":"20c0d2db-1916-433f-88c6-69d3ae123217","dataControls":{"name":{"expanded":true}},"playtestToggle":{"receivePlaytest":true}},"inputs":{},"outputs":{"trigger":{"connections":[{"node":2638,"input":"trigger","data":{"pins":[]}}]}},"position":[-1886.2980453503603,-625.5720512956576],"name":"Module Trigger In"},"232":{"id":232,"data":{"name":"Input","text":"Input text here","outputs":[],"socketKey":"9d61118c-3c5a-4379-9dae-41965e56207f","useDefault":false,"dataControls":{"name":{"expanded":true},"useDefault":{"expanded":true},"playtestToggle":{"expanded":true}},"defaultValue":"Input text here","playtestToggle":{"receivePlaytest":true}},"inputs":{},"outputs":{"output":{"connections":[{"node":2638,"input":"input","data":{"pins":[]}}]}},"position":[-1890.0042653507292,-454.5342380912433],"name":"Universal Input"},"233":{"id":233,"data":{"name":"Address","socketKey":"a9483a8d-8afc-4149-9e48-6a359ccb6fbf","dataControls":{"name":{"expanded":true},"sendToPlaytest":{"expanded":true}},"sendToPlaytest":true},"inputs":{"input":{"connections":[{"node":2638,"output":"output","data":{"pins":[]}}]},"trigger":{"connections":[{"node":2638,"output":"trigger","data":{"pins":[]}}]}},"outputs":{"trigger":{"connections":[{"node":5198,"input":"trigger","data":{"pins":[]}},{"node":5198,"input":"trigger","data":{"pins":[]}}]}},"position":[-760.3485751482309,-416.28190221844727],"name":"Output"},"2638":{"id":2638,"data":{"code":"\nfunction worker({\n  input,\n  agent_public_key\n}, data, state) {\n\n  let evalInput = input;\n\n  const hasAgentPublicKey = input.toLowerCase().includes(agent_public_key);\n\n  // if it includes the agent public key\n\n  if (hasAgentPublicKey) {\n    evalInput.replace(agent_public_key, 'your wallet');\n  }\n\n  function hasEthereumAddress(string) {\n    let regex = /^0x[a-fA-F0-9]{40}$/;\n    return regex.test(string);\n  }\n\n  const hasSpeakerPublicKey = hasEthereumAddress(evalInput);\n\n  // if there's no key, return output null\n  if (!hasSpeakerPublicKey) {\n    return { output: null }\n  }\n\n  // extract the speaker public key\n\n  function extractFirstEthereumAddress(string) {\n    let regex = /0x[a-fA-F0-9]{40}/g;\n    return string.match(regex)[0];\n  }\n\n  const speakerAddress = extractFirstEthereumAddress(evalInput);\n\n  return { output: speakerAddress }\n}\n","name":"Get 0x","inputs":[{"name":"input","taskType":"output","socketKey":"input","socketType":"anySocket","connectionType":"input"},{"name":"agent_public_key","taskType":"output","socketKey":"agent_public_key","socketType":"anySocket","connectionType":"input"}],"outputs":[{"name":"output","taskType":"output","socketKey":"output","socketType":"anySocket","connectionType":"output"}],"dataControls":{"code":{"expanded":true},"name":{"expanded":true},"inputs":{"expanded":true},"outputs":{"expanded":true}}},"inputs":{"input":{"connections":[{"node":232,"output":"output","data":{"pins":[]}}]},"agent_public_key":{"connections":[{"node":5197,"output":"output","data":{"pins":[]}}]},"trigger":{"connections":[{"node":124,"output":"trigger","data":{"pins":[]}}]}},"outputs":{"output":{"connections":[{"node":233,"input":"input","data":{"pins":[]}}]},"trigger":{"connections":[{"node":233,"input":"trigger","data":{"pins":[]}}]}},"position":[-1358.914270687644,-428.1169479067634],"name":"Code"},"5197":{"id":5197,"data":{"name":"Agent Public Key","text":"Input text here","socketKey":"0b632c7d-f278-450e-84ca-eb2a5ccceac1","dataControls":{"name":{"expanded":true},"useDefault":{"expanded":true},"playtestToggle":{"expanded":true}},"defaultValue":"Input text here","playtestToggle":{"receivePlaytest":true}},"inputs":{},"outputs":{"output":{"connections":[{"node":2638,"input":"agent_public_key","data":{"pins":[]}}]}},"position":[-1897.2409466902855,-196.74432576818123],"name":"Universal Input"},"5198":{"id":5198,"data":{"name":"trigger-out-5198","socketKey":"28bea551-4544-42ea-b0a2-08fb8132c6eb"},"inputs":{"trigger":{"connections":[{"node":233,"output":"trigger","data":{"pins":[]}},{"node":233,"output":"trigger","data":{"pins":[]}}]}},"outputs":{},"position":[-376.6228775353551,-415.85754084613603],"name":"Module Trigger Out"}}},"createdAt":"2022-12-14T10:18:11.553Z","updatedAt":"2022-12-21T11:33:11.845Z","deletedAt":null,"userId":"global","modules":[],"gameState":{}}